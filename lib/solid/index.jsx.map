{"version":3,"file":"index.jsx","sources":["../../src/src/core/utils.ts","../../src/src/core/cache.ts","../../src/src/core/environment.ts","../../src/src/core/store.ts","../../src/src/core/scroller.ts","../../src/src/core/resizer.ts","../../src/src/solid/ListItem.tsx","../../src/src/solid/utils.ts","../../src/src/solid/Virtualizer.tsx","../../src/src/solid/VList.tsx","../../src/src/solid/WindowVirtualizer.tsx","../../src/src/solid/index.ts"],"sourcesContent":["/** @internal */\r\nexport const NULL = null;\r\n\r\n/** @internal */\r\nexport const { min, max, abs, floor } = Math;\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const clamp = (\r\n  value: number,\r\n  minValue: number,\r\n  maxValue: number\r\n): number => min(maxValue, max(minValue, value));\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const sort = <T extends number>(arr: readonly T[]): T[] => {\r\n  return [...arr].sort((a, b) => a - b);\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const microtask: (fn: () => void) => void =\r\n  typeof queueMicrotask === \"function\"\r\n    ? queueMicrotask\r\n    : (fn) => {\r\n        Promise.resolve().then(fn);\r\n      };\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const createPromise = <T = void>(): [Promise<T>, (arg: T) => void] => {\r\n  let resolve: ((arg: T) => void) | undefined;\r\n  const promise = new Promise<T>((res) => {\r\n    resolve = res;\r\n  });\r\n  return [promise, resolve!];\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const once = <T>(fn: () => T): (() => T) => {\r\n  let cache: T;\r\n\r\n  return () => {\r\n    if (fn) {\r\n      cache = fn();\r\n      fn = undefined!;\r\n    }\r\n    return cache;\r\n  };\r\n};\r\n","import { type InternalCacheSnapshot, type ItemsRange } from \"./types.js\";\r\nimport { clamp, floor, max, min, sort } from \"./utils.js\";\r\n\r\ntype Writeable<T> = {\r\n  -readonly [key in keyof T]: Writeable<T[key]>;\r\n};\r\n\r\n/** @internal */\r\nexport const UNCACHED = -1;\r\n\r\n/**\r\n * @internal\r\n */\r\nexport type Cache = {\r\n  readonly _length: number;\r\n  // sizes\r\n  readonly _sizes: number[];\r\n  readonly _defaultItemSize: number;\r\n  // offsets\r\n  readonly _computedOffsetIndex: number;\r\n  readonly _offsets: number[];\r\n};\r\n\r\nconst fill = (array: number[], length: number, prepend?: boolean): number[] => {\r\n  const key = prepend ? \"unshift\" : \"push\";\r\n  for (let i = 0; i < length; i++) {\r\n    array[key](UNCACHED);\r\n  }\r\n  return array;\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const getItemSize = (cache: Cache, index: number): number => {\r\n  const size = cache._sizes[index]!;\r\n  return size === UNCACHED ? cache._defaultItemSize : size;\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const setItemSize = (\r\n  cache: Writeable<Cache>,\r\n  index: number,\r\n  size: number\r\n): boolean => {\r\n  const isInitialMeasurement = cache._sizes[index] === UNCACHED;\r\n  cache._sizes[index] = size;\r\n  // mark as dirty\r\n  cache._computedOffsetIndex = min(index, cache._computedOffsetIndex);\r\n  return isInitialMeasurement;\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const getItemOffset = (\r\n  cache: Writeable<Cache>,\r\n  index: number\r\n): number => {\r\n  if (!cache._length) return 0;\r\n  if (cache._computedOffsetIndex >= index) {\r\n    return cache._offsets[index]!;\r\n  }\r\n\r\n  if (cache._computedOffsetIndex < 0) {\r\n    // first offset must be 0 to avoid returning NaN, which can cause infinite rerender.\r\n    // https://github.com/inokawa/virtua/pull/160\r\n    cache._offsets[0] = 0;\r\n    cache._computedOffsetIndex = 0;\r\n  }\r\n  let i = cache._computedOffsetIndex;\r\n  let top = cache._offsets[i]!;\r\n  while (i < index) {\r\n    top += getItemSize(cache, i);\r\n    cache._offsets[++i] = top;\r\n  }\r\n  // mark as measured\r\n  cache._computedOffsetIndex = index;\r\n  return top;\r\n};\r\n\r\n/**\r\n * Finds the index of an item in the cache whose computed offset is closest to the specified offset.\r\n *\r\n * @internal\r\n */\r\nexport const findIndex = (\r\n  cache: Cache,\r\n  offset: number,\r\n  low: number = 0,\r\n  high: number = cache._length - 1\r\n): number => {\r\n  // Find with binary search\r\n  let found: number = low;\r\n  while (low <= high) {\r\n    const mid = floor((low + high) / 2);\r\n    if (getItemOffset(cache, mid) <= offset) {\r\n      found = mid;\r\n      low = mid + 1;\r\n    } else {\r\n      high = mid - 1;\r\n    }\r\n  }\r\n  return clamp(found, 0, cache._length - 1);\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const computeRange = (\r\n  cache: Cache,\r\n  startOffset: number,\r\n  endOffset: number,\r\n  prevStartIndex: number\r\n): ItemsRange => {\r\n  // Clamp because prevStartIndex may exceed the limit when children decreased a lot after scrolling\r\n  prevStartIndex = min(prevStartIndex, cache._length - 1);\r\n\r\n  if (getItemOffset(cache, prevStartIndex) <= startOffset) {\r\n    // search forward\r\n    // start <= end, prevStartIndex <= start\r\n    const end = findIndex(cache, endOffset, prevStartIndex);\r\n    return [findIndex(cache, startOffset, prevStartIndex, end), end];\r\n  } else {\r\n    // search backward\r\n    // start <= end, start <= prevStartIndex\r\n    const start = findIndex(cache, startOffset, undefined, prevStartIndex);\r\n    return [start, findIndex(cache, endOffset, start)];\r\n  }\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const estimateDefaultItemSize = (\r\n  cache: Writeable<Cache>,\r\n  startIndex: number\r\n): number => {\r\n  let measuredCountBeforeStart = 0;\r\n  // This function will be called after measurement so measured size array must be longer than 0\r\n  const measuredSizes: number[] = [];\r\n  cache._sizes.forEach((s, i) => {\r\n    if (s !== UNCACHED) {\r\n      measuredSizes.push(s);\r\n      if (i < startIndex) {\r\n        measuredCountBeforeStart++;\r\n      }\r\n    }\r\n  });\r\n\r\n  // Discard cache for now\r\n  cache._computedOffsetIndex = -1;\r\n\r\n  // Calculate median\r\n  const sorted = sort(measuredSizes);\r\n  const len = sorted.length;\r\n  const mid = (len / 2) | 0;\r\n  const median =\r\n    len % 2 === 0 ? (sorted[mid - 1]! + sorted[mid]!) / 2 : sorted[mid]!;\r\n\r\n  const prevDefaultItemSize = cache._defaultItemSize;\r\n\r\n  // Calculate diff of unmeasured items before start\r\n  return (\r\n    ((cache._defaultItemSize = median) - prevDefaultItemSize) *\r\n    max(startIndex - measuredCountBeforeStart, 0)\r\n  );\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const initCache = (\r\n  length: number,\r\n  itemSize: number,\r\n  sizes?: readonly number[]\r\n): Cache => {\r\n  return {\r\n    _defaultItemSize: itemSize,\r\n    _sizes: sizes\r\n      ? // https://github.com/inokawa/virtua/issues/441\r\n        fill(\r\n          sizes.slice(0, min(length, sizes.length)),\r\n          max(0, length - sizes.length)\r\n        )\r\n      : fill([], length),\r\n    _length: length,\r\n    _computedOffsetIndex: -1,\r\n    _offsets: fill([], length + 1),\r\n  };\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const takeCacheSnapshot = (cache: Cache): InternalCacheSnapshot => {\r\n  return [cache._sizes.slice(), cache._defaultItemSize];\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const updateCacheLength = (\r\n  cache: Writeable<Cache>,\r\n  length: number,\r\n  isShift?: boolean\r\n): number => {\r\n  const diff = length - cache._length;\r\n\r\n  cache._computedOffsetIndex = isShift\r\n    ? // Discard cache for now\r\n      -1\r\n    : min(length - 1, cache._computedOffsetIndex);\r\n  cache._length = length;\r\n\r\n  if (diff > 0) {\r\n    // Added\r\n    fill(cache._offsets, diff);\r\n    fill(cache._sizes, diff, isShift);\r\n    return cache._defaultItemSize * diff;\r\n  } else {\r\n    // Removed\r\n    cache._offsets.splice(diff);\r\n    return (\r\n      isShift ? cache._sizes.splice(0, -diff) : cache._sizes.splice(diff)\r\n    ).reduce(\r\n      (acc, removed) =>\r\n        acc - (removed === UNCACHED ? cache._defaultItemSize : removed),\r\n      0\r\n    );\r\n  }\r\n};\r\n","import { once } from \"./utils.js\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const isBrowser = typeof window !== \"undefined\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const getDocumentElement = (doc: Document): HTMLElement =>\r\n  doc.documentElement;\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const getCurrentDocument = (node: HTMLElement): Document =>\r\n  node.ownerDocument;\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const getCurrentWindow = (doc: Document) => doc.defaultView!;\r\n\r\n/**\r\n * Currently, all browsers on iOS/iPadOS are WebKit, including WebView.\r\n * @internal\r\n */\r\nexport const isIOSWebKit = /*#__PURE__*/ once((): boolean => {\r\n  if (/iP(hone|od|ad)/.test(navigator.userAgent)) {\r\n    return true;\r\n  }\r\n  // Modern iPad detection (iPadOS 13+)\r\n  // iPadOS 13+ reports the same userAgent/platform information as macOS, to enable desktop sites.\r\n  // So we treat devices that have macOS like information but with touch support as iPadOS.\r\n  // https://stackoverflow.com/questions/57776001/how-to-detect-ipad-pro-as-ipad-using-javascript\r\n  return navigator.platform === \"MacIntel\" && navigator.maxTouchPoints > 0;\r\n});\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const isSmoothScrollSupported = /*#__PURE__*/ once((): boolean => {\r\n  return \"scrollBehavior\" in getDocumentElement(document).style;\r\n});\r\n","import {\r\n  initCache,\r\n  getItemSize as _getItemSize,\r\n  getItemOffset as _getItemOffset,\r\n  UNCACHED,\r\n  setItemSize,\r\n  estimateDefaultItemSize,\r\n  updateCacheLength,\r\n  computeRange,\r\n  takeCacheSnapshot,\r\n  findIndex,\r\n} from \"./cache.js\";\r\nimport { isIOSWebKit } from \"./environment.js\";\r\nimport type {\r\n  CacheSnapshot,\r\n  InternalCacheSnapshot,\r\n  ItemResize,\r\n  ItemsRange,\r\n} from \"./types.js\";\r\nimport { abs, max, min, NULL } from \"./utils.js\";\r\n\r\nconst MAX_INT_32 = 0x7fffffff;\r\n\r\nconst SCROLL_IDLE = 0;\r\nconst SCROLL_DOWN = 1;\r\nconst SCROLL_UP = 2;\r\ntype ScrollDirection =\r\n  | typeof SCROLL_IDLE\r\n  | typeof SCROLL_DOWN\r\n  | typeof SCROLL_UP;\r\n\r\nconst SCROLL_BY_NATIVE = 0;\r\nconst SCROLL_BY_MANUAL_SCROLL = 1;\r\nconst SCROLL_BY_SHIFT = 2;\r\ntype ScrollMode =\r\n  | typeof SCROLL_BY_NATIVE\r\n  | typeof SCROLL_BY_MANUAL_SCROLL\r\n  | typeof SCROLL_BY_SHIFT;\r\n\r\n/** @internal */\r\nexport const ACTION_SCROLL = 1;\r\n/** @internal */\r\nexport const ACTION_SCROLL_END = 2;\r\n/** @internal */\r\nexport const ACTION_ITEM_RESIZE = 3;\r\n/** @internal */\r\nexport const ACTION_VIEWPORT_RESIZE = 4;\r\n/** @internal */\r\nexport const ACTION_ITEMS_LENGTH_CHANGE = 5;\r\n/** @internal */\r\nexport const ACTION_START_OFFSET_CHANGE = 6;\r\n/** @internal */\r\nexport const ACTION_MANUAL_SCROLL = 7;\r\n/** @internal */\r\nexport const ACTION_BEFORE_MANUAL_SMOOTH_SCROLL = 8;\r\n\r\ntype Actions =\r\n  | [type: typeof ACTION_SCROLL, offset: number]\r\n  | [type: typeof ACTION_SCROLL_END, dummy?: void]\r\n  | [type: typeof ACTION_ITEM_RESIZE, entries: ItemResize[]]\r\n  | [type: typeof ACTION_VIEWPORT_RESIZE, size: number]\r\n  | [\r\n      type: typeof ACTION_ITEMS_LENGTH_CHANGE,\r\n      arg: [length: number, isShift?: boolean | undefined]\r\n    ]\r\n  | [type: typeof ACTION_START_OFFSET_CHANGE, offset: number]\r\n  | [type: typeof ACTION_MANUAL_SCROLL, dummy?: void]\r\n  | [type: typeof ACTION_BEFORE_MANUAL_SMOOTH_SCROLL, offset: number];\r\n\r\n/** @internal */\r\nexport const UPDATE_VIRTUAL_STATE = 0b0001;\r\n/** @internal */\r\nexport const UPDATE_SIZE_EVENT = 0b0010;\r\n/** @internal */\r\nexport const UPDATE_SCROLL_EVENT = 0b0100;\r\n/** @internal */\r\nexport const UPDATE_SCROLL_END_EVENT = 0b1000;\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const getScrollSize = (store: VirtualStore): number => {\r\n  return max(store.$getTotalSize(), store.$getViewportSize());\r\n};\r\n\r\ntype Subscriber = (sync?: boolean) => void;\r\n\r\n/** @internal */\r\nexport type StateVersion =\r\n  number & {} /* hack for typescript to pretend as not falsy */;\r\n\r\n/**\r\n * @internal\r\n */\r\nexport type VirtualStore = {\r\n  $dispose(): void;\r\n  $getStateVersion(): StateVersion;\r\n  $getCacheSnapshot(): CacheSnapshot;\r\n  $getRange(bufferSize?: number): ItemsRange;\r\n  $findItemIndex(offset: number): number;\r\n  $isUnmeasuredItem(index: number): boolean;\r\n  $getItemOffset(index: number, fromEnd?: boolean): number;\r\n  $getItemSize(index: number): number;\r\n  $getItemsLength(): number;\r\n  $getScrollOffset(): number;\r\n  $isScrolling(): boolean;\r\n  $getViewportSize(): number;\r\n  $getStartSpacerSize(): number;\r\n  $getTotalSize(): number;\r\n  _flushJump(): [number, boolean];\r\n  $subscribe(target: number, cb: Subscriber): () => void;\r\n  $update(...action: Actions): void;\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const createVirtualStore = (\r\n  elementsCount: number,\r\n  itemSize: number = 40,\r\n  ssrCount: number = 0,\r\n  cacheSnapshot?: CacheSnapshot | undefined,\r\n  shouldAutoEstimateItemSize: boolean = false\r\n): VirtualStore => {\r\n  let isSSR = !!ssrCount;\r\n  let stateVersion: StateVersion = 1;\r\n  let viewportSize = 0;\r\n  let startSpacerSize = 0;\r\n  let scrollOffset = 0;\r\n  let jump = 0;\r\n  let pendingJump = 0;\r\n  let _flushedJump = 0;\r\n  let _scrollDirection: ScrollDirection = SCROLL_IDLE;\r\n  let _scrollMode: ScrollMode = SCROLL_BY_NATIVE;\r\n  let _frozenRange: ItemsRange | null = NULL;\r\n  let _prevRange: ItemsRange = [0, isSSR ? max(ssrCount - 1, 0) : -1];\r\n  let _totalMeasuredSize = 0;\r\n  let _isViewportMeasured = false;\r\n\r\n  const cache = initCache(\r\n    elementsCount,\r\n    cacheSnapshot\r\n      ? (cacheSnapshot as unknown as InternalCacheSnapshot)[1]\r\n      : itemSize,\r\n    cacheSnapshot && (cacheSnapshot as unknown as InternalCacheSnapshot)[0]\r\n  );\r\n  const subscribers = new Set<[number, Subscriber]>();\r\n  const getRelativeScrollOffset = () => scrollOffset - startSpacerSize;\r\n  const getVisibleOffset = () => getRelativeScrollOffset() + pendingJump + jump;\r\n  const getRange = (startOffset: number, endOffset: number) => {\r\n    return computeRange(cache, startOffset, endOffset, _prevRange[0]);\r\n  };\r\n  const getTotalSize = (): number => _getItemOffset(cache, cache._length);\r\n  const getItemOffset = (index: number, fromEnd?: boolean): number => {\r\n    const offset = _getItemOffset(cache, index) - pendingJump;\r\n    if (fromEnd) {\r\n      return getTotalSize() - offset - getItemSize(index);\r\n    }\r\n    return offset;\r\n  };\r\n  const getItemSize = (index: number): number => {\r\n    return _getItemSize(cache, index);\r\n  };\r\n  const isSizeEqual = (index: number, value: number = UNCACHED): boolean => {\r\n    return cache._sizes[index] === value;\r\n  };\r\n\r\n  const applyJump = (j: number) => {\r\n    if (j) {\r\n      if (\r\n        // In iOS WebKit browsers, updating scroll position will stop scrolling so it have to be deferred during scrolling.\r\n        (isIOSWebKit() && _scrollDirection !== SCROLL_IDLE) ||\r\n        // Before imperative smooth scrolling, we measure all items which may be visible during scrolling.\r\n        // However, especially in Firefox, there are rare cases where items resize while scrolling, which can stop smooth scrolling.\r\n        (_frozenRange && _scrollMode === SCROLL_BY_MANUAL_SCROLL)\r\n      ) {\r\n        pendingJump += j;\r\n      } else {\r\n        jump += j;\r\n      }\r\n    }\r\n  };\r\n\r\n  return {\r\n    $dispose: () => {\r\n      subscribers.clear();\r\n    },\r\n    $getStateVersion: () => stateVersion,\r\n    $getCacheSnapshot: () => {\r\n      return takeCacheSnapshot(cache) as unknown as CacheSnapshot;\r\n    },\r\n    $getRange: (bufferSize = 200) => {\r\n      if (!_isViewportMeasured || isSSR) {\r\n        // Return range for SSR, or return [0, -1] to render nothing, until the scroll offset and viewport size are determined.\r\n        // https://github.com/inokawa/virtua/issues/415\r\n        // https://github.com/inokawa/virtua/pull/818\r\n        return _prevRange;\r\n      }\r\n      let startIndex: number;\r\n      let endIndex: number;\r\n      if (_flushedJump) {\r\n        // Return previous range for consistent render until next scroll event comes in.\r\n        // And it must be clamped. https://github.com/inokawa/virtua/issues/597\r\n        [startIndex, endIndex] = _prevRange;\r\n      } else {\r\n        let startOffset = max(0, getVisibleOffset());\r\n        let endOffset = startOffset + viewportSize;\r\n\r\n        // For faster initial render pass, returns without buffer if measurement seems to be in progress.\r\n        if (!shouldAutoEstimateItemSize) {\r\n          bufferSize = max(0, bufferSize);\r\n\r\n          if (_scrollDirection !== SCROLL_DOWN) {\r\n            startOffset -= bufferSize;\r\n          }\r\n          if (_scrollDirection !== SCROLL_UP) {\r\n            endOffset += bufferSize;\r\n          }\r\n        }\r\n\r\n        [startIndex, endIndex] = _prevRange = getRange(\r\n          max(0, startOffset),\r\n          max(0, endOffset)\r\n        );\r\n        if (_frozenRange) {\r\n          startIndex = min(startIndex, _frozenRange[0]);\r\n          endIndex = max(endIndex, _frozenRange[1]);\r\n        }\r\n      }\r\n\r\n      return [max(startIndex, 0), min(endIndex, cache._length - 1)];\r\n    },\r\n    $findItemIndex: (offset) => findIndex(cache, offset - startSpacerSize),\r\n    $isUnmeasuredItem: isSizeEqual,\r\n    $getItemOffset: getItemOffset,\r\n    $getItemSize: getItemSize,\r\n    $getItemsLength: () => cache._length,\r\n    $getScrollOffset: () => scrollOffset,\r\n    $isScrolling: () => _scrollDirection !== SCROLL_IDLE,\r\n    $getViewportSize: () => viewportSize,\r\n    $getStartSpacerSize: () => startSpacerSize,\r\n    $getTotalSize: getTotalSize,\r\n    _flushJump: () => {\r\n      _flushedJump = jump;\r\n      jump = 0;\r\n      return [_flushedJump, _scrollMode === SCROLL_BY_SHIFT];\r\n    },\r\n    $subscribe: (target, cb) => {\r\n      const sub: [number, Subscriber] = [target, cb];\r\n      subscribers.add(sub);\r\n      return () => {\r\n        subscribers.delete(sub);\r\n      };\r\n    },\r\n    $update: (type, payload): void => {\r\n      let shouldFlushPendingJump: boolean | undefined;\r\n      let shouldSync: boolean | undefined;\r\n      let mutated = 0;\r\n\r\n      switch (type) {\r\n        case ACTION_SCROLL: {\r\n          if (payload === scrollOffset && _scrollMode === SCROLL_BY_NATIVE) {\r\n            // Ignore scroll events from different direction\r\n            break;\r\n          }\r\n\r\n          const flushedJump = _flushedJump;\r\n          _flushedJump = 0;\r\n\r\n          const delta = payload - scrollOffset;\r\n          const distance = abs(delta);\r\n\r\n          // Scroll event after jump compensation is not reliable because it may result in the opposite direction.\r\n          // The delta of artificial scroll may not be equal with the jump because it may be batched with other scrolls.\r\n          // And at least in latest Chrome/Firefox/Safari in 2023, setting value to scrollTop/scrollLeft can lose subpixel because its integer (sometimes float probably depending on dpr).\r\n          const isJustJumped = flushedJump && distance < abs(flushedJump) + 1;\r\n\r\n          // Scroll events are dispatched enough so it's ok to skip some of them.\r\n          if (\r\n            !isJustJumped &&\r\n            // Ignore until manual scrolling\r\n            _scrollMode === SCROLL_BY_NATIVE\r\n          ) {\r\n            _scrollDirection = delta < 0 ? SCROLL_UP : SCROLL_DOWN;\r\n          }\r\n\r\n          // TODO This will cause glitch in reverse infinite scrolling. Disable this until better solution is found.\r\n          // if (\r\n          //   pendingJump &&\r\n          //   ((_scrollDirection === SCROLL_UP &&\r\n          //     payload - max(pendingJump, 0) <= 0) ||\r\n          //     (_scrollDirection === SCROLL_DOWN &&\r\n          //       payload - min(pendingJump, 0) >= getScrollOffsetMax()))\r\n          // ) {\r\n          //   // Flush if almost reached to start or end\r\n          //   shouldFlushPendingJump = true;\r\n          // }\r\n\r\n          if (isSSR) {\r\n            isSSR = false;\r\n          }\r\n\r\n          scrollOffset = payload;\r\n          mutated = UPDATE_SCROLL_EVENT;\r\n\r\n          // Skip if offset is not changed\r\n          // Scroll offset may exceed min or max especially in Safari's elastic scrolling.\r\n          const relativeOffset = getRelativeScrollOffset();\r\n          if (\r\n            relativeOffset >= -viewportSize &&\r\n            relativeOffset <= getTotalSize()\r\n          ) {\r\n            mutated += UPDATE_VIRTUAL_STATE;\r\n\r\n            // Update synchronously if scrolled a lot\r\n            shouldSync = distance > viewportSize;\r\n          }\r\n          break;\r\n        }\r\n        case ACTION_SCROLL_END: {\r\n          mutated = UPDATE_SCROLL_END_EVENT;\r\n          if (_scrollDirection !== SCROLL_IDLE) {\r\n            shouldFlushPendingJump = true;\r\n            mutated += UPDATE_VIRTUAL_STATE;\r\n          }\r\n          _scrollDirection = SCROLL_IDLE;\r\n          _scrollMode = SCROLL_BY_NATIVE;\r\n          _frozenRange = NULL;\r\n          break;\r\n        }\r\n        case ACTION_ITEM_RESIZE: {\r\n          const updated = payload.filter(\r\n            ([index, size]) => !isSizeEqual(index, size)\r\n          );\r\n\r\n          // Skip if all items are cached and not updated\r\n          if (!updated.length) {\r\n            break;\r\n          }\r\n\r\n          // Calculate jump by resize to minimize junks in appearance\r\n          applyJump(\r\n            updated.reduce((acc, [index, size]) => {\r\n              if (\r\n                // Keep distance from end during shifting\r\n                _scrollMode === SCROLL_BY_SHIFT ||\r\n                (_frozenRange && _scrollMode === SCROLL_BY_MANUAL_SCROLL\r\n                  ? // https://github.com/inokawa/virtua/issues/380\r\n                    // https://github.com/inokawa/virtua/issues/758\r\n                    index < _frozenRange[0]\r\n                  : // Otherwise we should maintain visible position\r\n                    // Only apply jump if item is COMPLETELY above viewport (not just its top)\r\n                    // Use new size (not cached) so a growing item that will extend into\r\n                    // the viewport after resize doesn't trigger a jump\r\n                    getItemOffset(index) + max(size, getItemSize(index)) < getRelativeScrollOffset())\r\n              ) {\r\n                acc += size - getItemSize(index);\r\n              }\r\n              return acc;\r\n            }, 0)\r\n          );\r\n\r\n          // Update item sizes\r\n          for (const [index, size] of updated) {\r\n            const prevSize = getItemSize(index);\r\n            const isInitialMeasurement = setItemSize(cache, index, size);\r\n\r\n            if (shouldAutoEstimateItemSize) {\r\n              _totalMeasuredSize += isInitialMeasurement\r\n                ? size\r\n                : size - prevSize;\r\n            }\r\n          }\r\n\r\n          // Estimate initial item size from measured sizes\r\n          if (\r\n            shouldAutoEstimateItemSize &&\r\n            viewportSize &&\r\n            // If the total size is lower than the viewport, the item may be a empty state\r\n            _totalMeasuredSize > viewportSize\r\n          ) {\r\n            applyJump(\r\n              estimateDefaultItemSize(\r\n                cache,\r\n                findIndex(cache, getVisibleOffset())\r\n              )\r\n            );\r\n            shouldAutoEstimateItemSize = false;\r\n          }\r\n\r\n          mutated = UPDATE_VIRTUAL_STATE + UPDATE_SIZE_EVENT;\r\n\r\n          // Synchronous update is necessary in current design to minimize visible glitch in concurrent rendering.\r\n          // However this seems to be the main cause of the errors from ResizeObserver.\r\n          // https://github.com/inokawa/virtua/issues/470\r\n          //\r\n          // And in React, synchronous update with flushSync after asynchronous update will overtake the asynchronous one.\r\n          // If items resize happens just after scroll, race condition can occur depending on implementation.\r\n          shouldSync = true;\r\n          break;\r\n        }\r\n        case ACTION_VIEWPORT_RESIZE: {\r\n          if (viewportSize !== payload) {\r\n            if (!viewportSize) {\r\n              _isViewportMeasured = shouldSync = true;\r\n            }\r\n            viewportSize = payload;\r\n            mutated = UPDATE_VIRTUAL_STATE + UPDATE_SIZE_EVENT;\r\n          }\r\n          break;\r\n        }\r\n        case ACTION_ITEMS_LENGTH_CHANGE: {\r\n          if (payload[1]) {\r\n            applyJump(updateCacheLength(cache, payload[0], true));\r\n            _scrollMode = SCROLL_BY_SHIFT;\r\n            mutated = UPDATE_VIRTUAL_STATE;\r\n          } else {\r\n            updateCacheLength(cache, payload[0]);\r\n            // https://github.com/inokawa/virtua/issues/552\r\n            // https://github.com/inokawa/virtua/issues/557\r\n            mutated = UPDATE_VIRTUAL_STATE;\r\n          }\r\n          break;\r\n        }\r\n        case ACTION_START_OFFSET_CHANGE: {\r\n          startSpacerSize = payload;\r\n          break;\r\n        }\r\n        case ACTION_MANUAL_SCROLL: {\r\n          _scrollMode = SCROLL_BY_MANUAL_SCROLL;\r\n          break;\r\n        }\r\n        case ACTION_BEFORE_MANUAL_SMOOTH_SCROLL: {\r\n          _frozenRange = getRange(payload, payload + viewportSize);\r\n          mutated = UPDATE_VIRTUAL_STATE;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (mutated) {\r\n        stateVersion = (stateVersion & MAX_INT_32) + 1;\r\n\r\n        if (shouldFlushPendingJump && pendingJump) {\r\n          jump += pendingJump;\r\n          pendingJump = 0;\r\n        }\r\n\r\n        subscribers.forEach(([target, cb]) => {\r\n          // Early return to skip React's computation\r\n          if (!(mutated & target)) {\r\n            return;\r\n          }\r\n          // https://github.com/facebook/react/issues/25191\r\n          // https://github.com/facebook/react/blob/a5fc797db14c6e05d4d5c4dbb22a0dd70d41f5d5/packages/react-reconciler/src/ReactFiberWorkLoop.js#L1443-L1447\r\n          cb(shouldSync);\r\n        });\r\n      }\r\n    },\r\n  };\r\n};\r\n","import {\r\n  getCurrentDocument,\r\n  getCurrentWindow,\r\n  getDocumentElement,\r\n  isIOSWebKit,\r\n  isSmoothScrollSupported,\r\n} from \"./environment.js\";\r\nimport {\r\n  ACTION_SCROLL,\r\n  type VirtualStore,\r\n  ACTION_SCROLL_END,\r\n  UPDATE_SIZE_EVENT,\r\n  ACTION_MANUAL_SCROLL,\r\n  ACTION_BEFORE_MANUAL_SMOOTH_SCROLL,\r\n  ACTION_START_OFFSET_CHANGE,\r\n} from \"./store.js\";\r\nimport { type ScrollToIndexOpts } from \"./types.js\";\r\nimport { clamp, createPromise, microtask, NULL } from \"./utils.js\";\r\n\r\nconst timeout = setTimeout;\r\n\r\nconst debounce = <T extends () => void>(fn: T, ms: number) => {\r\n  let id: ReturnType<typeof setTimeout> | undefined | null;\r\n\r\n  const cancel = () => {\r\n    if (id != NULL) {\r\n      clearTimeout(id);\r\n    }\r\n  };\r\n  const debouncedFn = () => {\r\n    cancel();\r\n    id = timeout(() => {\r\n      id = NULL;\r\n      fn();\r\n    }, ms);\r\n  };\r\n  debouncedFn._cancel = cancel;\r\n  return debouncedFn;\r\n};\r\n\r\n/**\r\n * scrollTop/scrollLeft can be negative value under certain styles.\r\n * - direction: rtl https://github.com/othree/jquery.rtl-scroll-type\r\n * - writing-mode   https://people.igalia.com/fwang/scrollable-elements-in-non-default-writing-modes/\r\n * - flex-direction: column-reverse/row-reverse\r\n *\r\n * top/left bottom/right\r\n * 0        100          spec compliant bottom/right overflow, or possibly top/left overflow in Chrome earlier than v85\r\n * -100     0            spec compliant top/left overflow\r\n * https://drafts.csswg.org/cssom-view/#scroll-an-element\r\n */\r\nconst normalizeScrollOffset = (offset: number, isNegative: boolean): number => {\r\n  return isNegative ? -offset : offset;\r\n};\r\n\r\nconst createScrollObserver = (\r\n  store: VirtualStore,\r\n  viewport: HTMLElement | Window,\r\n  isHorizontal: boolean,\r\n  getScrollOffset: () => number,\r\n  updateScrollOffset: (\r\n    value: number,\r\n    shift: boolean,\r\n    isMomentumScrolling: boolean\r\n  ) => void,\r\n  getStartOffset?: () => number\r\n) => {\r\n  const now = Date.now;\r\n\r\n  let lastScrollTime = 0;\r\n  let wheeling = false;\r\n  let touching = false;\r\n  let justTouchEnded = false;\r\n  let stillMomentumScrolling = false;\r\n\r\n  const onScrollEnd = debounce(() => {\r\n    if (wheeling || touching) {\r\n      wheeling = false;\r\n\r\n      // Wait while wheeling or touching\r\n      onScrollEnd();\r\n      return;\r\n    }\r\n\r\n    justTouchEnded = false;\r\n\r\n    store.$update(ACTION_SCROLL_END);\r\n  }, 150);\r\n\r\n  const onScroll = () => {\r\n    lastScrollTime = now();\r\n\r\n    if (justTouchEnded) {\r\n      stillMomentumScrolling = true;\r\n    }\r\n\r\n    if (getStartOffset) {\r\n      store.$update(ACTION_START_OFFSET_CHANGE, getStartOffset());\r\n    }\r\n    store.$update(ACTION_SCROLL, getScrollOffset());\r\n\r\n    onScrollEnd();\r\n  };\r\n\r\n  // Infer scroll state also from wheel events\r\n  // Sometimes scroll events do not fire when frame dropped even if the visual have been already scrolled\r\n  const onWheel = ((e: WheelEvent) => {\r\n    if (\r\n      wheeling ||\r\n      // Scroll start should be detected with scroll event\r\n      !store.$isScrolling() ||\r\n      // Probably a pinch-to-zoom gesture\r\n      e.ctrlKey\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    const timeDelta = now() - lastScrollTime;\r\n    if (\r\n      // Check if wheel event occurs some time after scrolling\r\n      150 > timeDelta &&\r\n      50 < timeDelta &&\r\n      // Get delta before checking deltaMode for firefox behavior\r\n      // https://github.com/w3c/uievents/issues/181#issuecomment-392648065\r\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=1392460#c34\r\n      (isHorizontal ? e.deltaX : e.deltaY)\r\n    ) {\r\n      wheeling = true;\r\n    }\r\n  }) as (e: Event) => void; // FIXME type error. why only here?\r\n\r\n  const onTouchStart = () => {\r\n    touching = true;\r\n    justTouchEnded = stillMomentumScrolling = false;\r\n  };\r\n  const onTouchEnd = () => {\r\n    touching = false;\r\n    if (isIOSWebKit()) {\r\n      justTouchEnded = true;\r\n    }\r\n  };\r\n\r\n  viewport.addEventListener(\"scroll\", onScroll);\r\n  viewport.addEventListener(\"wheel\", onWheel, { passive: true });\r\n  viewport.addEventListener(\"touchstart\", onTouchStart, { passive: true });\r\n  viewport.addEventListener(\"touchend\", onTouchEnd, { passive: true });\r\n\r\n  return {\r\n    _dispose: () => {\r\n      viewport.removeEventListener(\"scroll\", onScroll);\r\n      viewport.removeEventListener(\"wheel\", onWheel);\r\n      viewport.removeEventListener(\"touchstart\", onTouchStart);\r\n      viewport.removeEventListener(\"touchend\", onTouchEnd);\r\n      onScrollEnd._cancel();\r\n    },\r\n    _fixScrollJump: () => {\r\n      const [jump, shift] = store._flushJump();\r\n      if (!jump) return;\r\n      updateScrollOffset(jump, shift, stillMomentumScrolling);\r\n      stillMomentumScrolling = false;\r\n\r\n      if (shift && store.$getViewportSize() > store.$getTotalSize()) {\r\n        // In this case applying jump may not cause scroll.\r\n        // Current logic expects scroll event occurs after applying jump so we dispatch it manually.\r\n        store.$update(ACTION_SCROLL, getScrollOffset());\r\n      }\r\n    },\r\n  };\r\n};\r\n\r\ntype ScrollObserver = ReturnType<typeof createScrollObserver>;\r\n\r\ntype ScheduleScrollFunction = (\r\n  getTargetOffset: () => number,\r\n  smooth?: boolean\r\n) => Promise<void>;\r\n\r\nconst createScrollScheduler = (\r\n  store: VirtualStore,\r\n  initialized: () => Promise<boolean>,\r\n  scroll: (offset: number, smooth?: boolean) => void\r\n): [scroll: ScheduleScrollFunction, cancel: () => void] => {\r\n  let cancelScroll: (() => void) | undefined;\r\n\r\n  // The given offset will be clamped by browser\r\n  // https://drafts.csswg.org/cssom-view/#dom-element-scrolltop\r\n  return [\r\n    async (getTargetOffset, smooth) => {\r\n      // Wait for element assign. The element may be undefined if scrollRef prop is used and scroll is scheduled on mount.\r\n      // https://github.com/inokawa/virtua/pull/733\r\n      // https://github.com/inokawa/virtua/pull/750\r\n      if (!(await initialized())) {\r\n        return;\r\n      }\r\n\r\n      if (cancelScroll) {\r\n        // Cancel waiting scrollTo\r\n        cancelScroll();\r\n      }\r\n\r\n      const waitForMeasurement = (): [Promise<boolean>, () => void] => {\r\n        // Wait for the scroll destination items to be measured.\r\n        // The measurement will be done asynchronously and the timing is not predictable so we use promise.\r\n        const [promise, resolve] = createPromise<boolean>();\r\n        cancelScroll = () => {\r\n          resolve(false);\r\n        };\r\n\r\n        // Resize event may not happen when the window/tab is not visible, or during browser back in Safari.\r\n        // We have to wait for the initial measurement to avoid failing imperative scroll on mount.\r\n        // https://github.com/inokawa/virtua/issues/450\r\n        if (store.$getViewportSize()) {\r\n          // Cancel when items around scroll destination completely measured\r\n          timeout(cancelScroll, 150);\r\n        }\r\n        return [\r\n          promise,\r\n          store.$subscribe(UPDATE_SIZE_EVENT, () => {\r\n            resolve(true);\r\n          }),\r\n        ];\r\n      };\r\n\r\n      if (smooth && isSmoothScrollSupported()) {\r\n        store.$update(ACTION_BEFORE_MANUAL_SMOOTH_SCROLL, getTargetOffset());\r\n\r\n        // https://github.com/inokawa/virtua/issues/590\r\n        microtask(async () => {\r\n          while (true) {\r\n            let done = true;\r\n            for (let [i, end] = store.$getRange(); i <= end; i++) {\r\n              if (store.$isUnmeasuredItem(i)) {\r\n                done = false;\r\n                break;\r\n              }\r\n            }\r\n            if (done) {\r\n              break;\r\n            }\r\n            const [promise, unsubscribe] = waitForMeasurement();\r\n\r\n            try {\r\n              if (!(await promise)) {\r\n                // canceled\r\n                return;\r\n              }\r\n            } finally {\r\n              unsubscribe();\r\n            }\r\n          }\r\n\r\n          store.$update(ACTION_MANUAL_SCROLL);\r\n          scroll(getTargetOffset(), smooth);\r\n        });\r\n      } else {\r\n        while (true) {\r\n          const [promise, unsubscribe] = waitForMeasurement();\r\n\r\n          try {\r\n            store.$update(ACTION_MANUAL_SCROLL);\r\n            scroll(getTargetOffset());\r\n\r\n            if (!(await promise)) {\r\n              // canceled or finished\r\n              return;\r\n            }\r\n          } finally {\r\n            unsubscribe();\r\n          }\r\n        }\r\n      }\r\n    },\r\n    () => {\r\n      cancelScroll && cancelScroll();\r\n    },\r\n  ];\r\n};\r\n\r\ninterface Scroller<T extends HTMLElement | void> {\r\n  $observe: (containerElement: HTMLElement, viewport: T) => void;\r\n  $dispose(): void;\r\n  $fixScrollJump: () => void;\r\n  $isNegative(): boolean;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const createScroller = (\r\n  store: VirtualStore,\r\n  isHorizontal: boolean\r\n): Scroller<HTMLElement> & {\r\n  $scrollTo: (offset: number) => void;\r\n  $scrollBy: (offset: number) => void;\r\n  $scrollToIndex: (index: number, opts?: ScrollToIndexOpts) => void;\r\n} => {\r\n  let viewportElement: HTMLElement | undefined;\r\n  let scrollObserver: ScrollObserver | undefined;\r\n  let initialized = createPromise<boolean>();\r\n  let isNegative = false;\r\n  const scrollOffsetKey = isHorizontal ? \"scrollLeft\" : \"scrollTop\";\r\n  const overflowKey = isHorizontal ? \"overflowX\" : \"overflowY\";\r\n\r\n  const [scheduleScroll, cancelScroll] = createScrollScheduler(\r\n    store,\r\n    () => initialized[0],\r\n    (offset, smooth) => {\r\n      offset = normalizeScrollOffset(offset, isNegative);\r\n\r\n      if (smooth) {\r\n        viewportElement!.scrollTo({\r\n          [isHorizontal ? \"left\" : \"top\"]: offset,\r\n          behavior: \"smooth\",\r\n        });\r\n      } else {\r\n        viewportElement![scrollOffsetKey] = offset;\r\n      }\r\n    }\r\n  );\r\n\r\n  return {\r\n    $observe(_, viewport) {\r\n      viewportElement = viewport;\r\n\r\n      if (isHorizontal) {\r\n        isNegative = getComputedStyle(viewport).direction === \"rtl\";\r\n      }\r\n\r\n      scrollObserver = createScrollObserver(\r\n        store,\r\n        viewport,\r\n        isHorizontal,\r\n        () => normalizeScrollOffset(viewport[scrollOffsetKey], isNegative),\r\n        (jump, shift, isMomentumScrolling) => {\r\n          // If we update scroll position while touching on iOS, the position will be reverted.\r\n          // However iOS WebKit fires touch events only once at the beginning of momentum scrolling.\r\n          // That means we have no reliable way to confirm still touched or not if user touches more than once during momentum scrolling...\r\n          // This is a hack for the suspectable situations, inspired by https://github.com/prud/ios-overflow-scroll-to-top\r\n          if (isMomentumScrolling) {\r\n            const style = viewport.style;\r\n            const prev = style[overflowKey];\r\n            style[overflowKey] = \"hidden\";\r\n            timeout(() => {\r\n              style[overflowKey] = prev;\r\n            });\r\n          }\r\n\r\n          // Use absolute position not to exceed scrollable bounds\r\n          // https://github.com/inokawa/virtua/discussions/475\r\n          viewport[scrollOffsetKey] = normalizeScrollOffset(\r\n            store.$getScrollOffset() + jump,\r\n            isNegative\r\n          );\r\n          if (shift) {\r\n            // https://github.com/inokawa/virtua/issues/357\r\n            cancelScroll();\r\n          }\r\n        }\r\n      );\r\n\r\n      initialized[1](true);\r\n    },\r\n    $dispose() {\r\n      scrollObserver && scrollObserver._dispose();\r\n      initialized[1](false);\r\n      // https://github.com/inokawa/virtua/pull/765\r\n      initialized = createPromise();\r\n    },\r\n    $isNegative: () => isNegative,\r\n    $scrollTo(offset) {\r\n      scheduleScroll(() => offset);\r\n    },\r\n    $scrollBy(offset) {\r\n      offset += store.$getScrollOffset();\r\n      scheduleScroll(() => offset);\r\n    },\r\n    $scrollToIndex(index, { align, smooth, offset = 0 } = {}) {\r\n      index = clamp(index, 0, store.$getItemsLength() - 1);\r\n\r\n      if (align === \"nearest\") {\r\n        const itemOffset = store.$getItemOffset(index);\r\n        const scrollOffset = store.$getScrollOffset();\r\n\r\n        if (itemOffset < scrollOffset) {\r\n          align = \"start\";\r\n        } else if (\r\n          itemOffset + store.$getItemSize(index) >\r\n          scrollOffset + store.$getViewportSize()\r\n        ) {\r\n          align = \"end\";\r\n        } else {\r\n          // already completely visible\r\n          return;\r\n        }\r\n      }\r\n\r\n      scheduleScroll(() => {\r\n        return (\r\n          offset +\r\n          store.$getStartSpacerSize() +\r\n          store.$getItemOffset(index) +\r\n          (align === \"end\"\r\n            ? store.$getItemSize(index) - store.$getViewportSize()\r\n            : align === \"center\"\r\n            ? (store.$getItemSize(index) - store.$getViewportSize()) / 2\r\n            : 0)\r\n        );\r\n      }, smooth);\r\n    },\r\n    $fixScrollJump: () => {\r\n      scrollObserver && scrollObserver._fixScrollJump();\r\n    },\r\n  };\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const createWindowScroller = (\r\n  store: VirtualStore,\r\n  isHorizontal: boolean\r\n): Scroller<void> & {\r\n  $scrollToIndex: (index: number, opts?: ScrollToIndexOpts) => void;\r\n} => {\r\n  let containerElement: HTMLElement | undefined;\r\n  let scrollObserver: ScrollObserver | undefined;\r\n  let initialized = createPromise<boolean>();\r\n  let isNegative = false;\r\n  const scrollToKey = isHorizontal ? \"left\" : \"top\";\r\n\r\n  const [scheduleScroll] = createScrollScheduler(\r\n    store,\r\n    () => initialized[0],\r\n    (offset, smooth) => {\r\n      offset = normalizeScrollOffset(offset, isNegative);\r\n\r\n      const window = getCurrentWindow(getCurrentDocument(containerElement!));\r\n\r\n      if (smooth) {\r\n        window.scroll({\r\n          [scrollToKey]: offset,\r\n          behavior: \"smooth\",\r\n        });\r\n      } else {\r\n        window.scroll({\r\n          [scrollToKey]: offset,\r\n        });\r\n      }\r\n    }\r\n  );\r\n\r\n  const calcOffsetToViewport = (\r\n    node: HTMLElement,\r\n    viewport: HTMLElement,\r\n    window: Window,\r\n    isHorizontal: boolean,\r\n    offset: number = 0\r\n  ): number => {\r\n    // TODO calc offset only when it changes (maybe impossible)\r\n    const offsetKey = isHorizontal ? \"offsetLeft\" : \"offsetTop\";\r\n    const offsetSum =\r\n      offset +\r\n      (isHorizontal && isNegative\r\n        ? window.innerWidth - node[offsetKey] - node.offsetWidth\r\n        : node[offsetKey]);\r\n\r\n    const parent = node.offsetParent;\r\n    if (node === viewport || !parent) {\r\n      return offsetSum;\r\n    }\r\n\r\n    return calcOffsetToViewport(\r\n      parent as HTMLElement,\r\n      viewport,\r\n      window,\r\n      isHorizontal,\r\n      offsetSum\r\n    );\r\n  };\r\n\r\n  return {\r\n    $observe(container) {\r\n      containerElement = container;\r\n      const scrollOffsetKey = isHorizontal ? \"scrollX\" : \"scrollY\";\r\n\r\n      const document = getCurrentDocument(container);\r\n      const window = getCurrentWindow(document);\r\n\r\n      if (isHorizontal) {\r\n        // Detect RTL document\r\n        isNegative =\r\n          getComputedStyle(getDocumentElement(document)).direction === \"rtl\";\r\n      }\r\n\r\n      scrollObserver = createScrollObserver(\r\n        store,\r\n        window,\r\n        isHorizontal,\r\n        () => normalizeScrollOffset(window[scrollOffsetKey], isNegative),\r\n        (jump, shift) => {\r\n          // TODO support case two window scrollers exist in the same view\r\n          if (shift) {\r\n            // Use absolute position not to exceed scrollable bounds\r\n            window.scroll({\r\n              [scrollToKey]: normalizeScrollOffset(\r\n                store.$getScrollOffset() + jump,\r\n                isNegative\r\n              ),\r\n            });\r\n          } else {\r\n            // Use window.scrollBy here, which causes less layout shift for some reason.\r\n            window.scrollBy({\r\n              [scrollToKey]: normalizeScrollOffset(jump, isNegative),\r\n            });\r\n          }\r\n        },\r\n        () =>\r\n          calcOffsetToViewport(container, document.body, window, isHorizontal)\r\n      );\r\n\r\n      initialized[1](true);\r\n    },\r\n    $dispose() {\r\n      scrollObserver && scrollObserver._dispose();\r\n      containerElement = undefined;\r\n      initialized[1](false);\r\n      // https://github.com/inokawa/virtua/pull/765\r\n      initialized = createPromise();\r\n    },\r\n    $isNegative: () => isNegative,\r\n    $fixScrollJump: () => {\r\n      scrollObserver && scrollObserver._fixScrollJump();\r\n    },\r\n    $scrollToIndex(index, { align, smooth, offset = 0 } = {}) {\r\n      if (!containerElement) return;\r\n\r\n      index = clamp(index, 0, store.$getItemsLength() - 1);\r\n\r\n      if (align === \"nearest\") {\r\n        const itemOffset = store.$getItemOffset(index);\r\n        const scrollOffset = store.$getScrollOffset();\r\n\r\n        if (itemOffset < scrollOffset) {\r\n          align = \"start\";\r\n        } else if (\r\n          itemOffset + store.$getItemSize(index) >\r\n          scrollOffset + store.$getViewportSize()\r\n        ) {\r\n          align = \"end\";\r\n        } else {\r\n          return;\r\n        }\r\n      }\r\n\r\n      const document = getCurrentDocument(containerElement);\r\n      const window = getCurrentWindow(document);\r\n      const html = getDocumentElement(document);\r\n      const getScrollbarSize = () =>\r\n        store.$getViewportSize() -\r\n        (isHorizontal ? html.clientWidth : html.clientHeight);\r\n\r\n      scheduleScroll(() => {\r\n        return (\r\n          offset +\r\n          // Calculate target scroll position including container's offset from document\r\n          calcOffsetToViewport(\r\n            containerElement!,\r\n            document.body,\r\n            window,\r\n            isHorizontal\r\n          ) +\r\n          // store._getStartSpacerSize() +\r\n          store.$getItemOffset(index) +\r\n          (align === \"end\"\r\n            ? store.$getItemSize(index) -\r\n              (store.$getViewportSize() - getScrollbarSize())\r\n            : align === \"center\"\r\n            ? (store.$getItemSize(index) -\r\n                (store.$getViewportSize() - getScrollbarSize())) /\r\n              2\r\n            : 0)\r\n        );\r\n      }, smooth);\r\n    },\r\n  };\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface GridScroller extends Scroller<HTMLElement> {\r\n  $scrollTo: (offsetX?: number, offsetY?: number) => void;\r\n  $scrollBy: (offsetX?: number, offsetY?: number) => void;\r\n  $scrollToIndex: (indexX?: number, indexY?: number) => void;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const createGridScroller = (\r\n  rowStore: VirtualStore,\r\n  colStore: VirtualStore\r\n): GridScroller => {\r\n  const rowScroller = createScroller(rowStore, false);\r\n  const colScroller = createScroller(colStore, true);\r\n  return {\r\n    $observe(container, viewport) {\r\n      rowScroller.$observe(container, viewport);\r\n      colScroller.$observe(container, viewport);\r\n    },\r\n    $dispose() {\r\n      rowScroller.$dispose();\r\n      colScroller.$dispose();\r\n    },\r\n    $isNegative: colScroller.$isNegative,\r\n    $scrollTo(row, col) {\r\n      if (row != null) {\r\n        rowScroller.$scrollTo(row);\r\n      }\r\n      if (col != null) {\r\n        colScroller.$scrollTo(col);\r\n      }\r\n    },\r\n    $scrollBy(row, col) {\r\n      if (row != null) {\r\n        rowScroller.$scrollBy(row);\r\n      }\r\n      if (col != null) {\r\n        colScroller.$scrollBy(col);\r\n      }\r\n    },\r\n    $scrollToIndex(row, col) {\r\n      if (row != null) {\r\n        rowScroller.$scrollToIndex(row);\r\n      }\r\n      if (col != null) {\r\n        colScroller.$scrollToIndex(col);\r\n      }\r\n    },\r\n    $fixScrollJump() {\r\n      rowScroller.$fixScrollJump();\r\n      colScroller.$fixScrollJump();\r\n    },\r\n  };\r\n};\r\n","import { getCurrentDocument, getCurrentWindow } from \"./environment.js\";\r\nimport {\r\n  ACTION_ITEM_RESIZE,\r\n  ACTION_VIEWPORT_RESIZE,\r\n  type VirtualStore,\r\n} from \"./store.js\";\r\nimport { type ItemResize } from \"./types.js\";\r\nimport { max, microtask, NULL } from \"./utils.js\";\r\n\r\nconst createResizeObserver = (cb: ResizeObserverCallback) => {\r\n  let ro: ResizeObserver | undefined;\r\n\r\n  return {\r\n    _observe(e: HTMLElement) {\r\n      // Initialize ResizeObserver lazily for SSR\r\n      // https://www.w3.org/TR/resize-observer/#intro\r\n      (\r\n        ro ||\r\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=1491739\r\n        (ro = new (getCurrentWindow(getCurrentDocument(e)).ResizeObserver)(cb))\r\n      ).observe(e);\r\n    },\r\n    _unobserve(e: HTMLElement) {\r\n      ro!.unobserve(e);\r\n    },\r\n    _dispose() {\r\n      ro && ro.disconnect();\r\n    },\r\n  };\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport type ItemResizeObserver = (el: HTMLElement, i: number) => () => void;\r\n\r\ninterface ListResizer {\r\n  $observeRoot(viewportElement: HTMLElement): void;\r\n  $observeItem: ItemResizeObserver;\r\n  $dispose(): void;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const createResizer = (\r\n  store: VirtualStore,\r\n  isHorizontal: boolean\r\n): ListResizer => {\r\n  let viewportElement: HTMLElement | undefined;\r\n  const sizeKey = isHorizontal ? \"width\" : \"height\";\r\n  const mountedIndexes = new WeakMap<Element, number>();\r\n\r\n  const resizeObserver = createResizeObserver((entries) => {\r\n    const resizes: ItemResize[] = [];\r\n    for (const { target, contentRect } of entries) {\r\n      // Skip zero-sized rects that may be observed under `display: none` style\r\n      if (!(target as HTMLElement).offsetParent) continue;\r\n\r\n      if (target === viewportElement) {\r\n        store.$update(ACTION_VIEWPORT_RESIZE, contentRect[sizeKey]);\r\n      } else {\r\n        const index = mountedIndexes.get(target);\r\n        if (index != NULL) {\r\n          resizes.push([index, contentRect[sizeKey]]);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (resizes.length) {\r\n      store.$update(ACTION_ITEM_RESIZE, resizes);\r\n    }\r\n  });\r\n\r\n  return {\r\n    $observeRoot(viewport: HTMLElement) {\r\n      resizeObserver._observe((viewportElement = viewport));\r\n    },\r\n    $observeItem: (el: HTMLElement, i: number) => {\r\n      mountedIndexes.set(el, i);\r\n      resizeObserver._observe(el);\r\n      return () => {\r\n        mountedIndexes.delete(el);\r\n        resizeObserver._unobserve(el);\r\n      };\r\n    },\r\n    $dispose: resizeObserver._dispose,\r\n  };\r\n};\r\n\r\ninterface WindowListResizer {\r\n  $observeRoot(container: HTMLElement): void;\r\n  $observeItem: ItemResizeObserver;\r\n  $dispose(): void;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const createWindowResizer = (\r\n  store: VirtualStore,\r\n  isHorizontal: boolean\r\n): WindowListResizer => {\r\n  const sizeKey = isHorizontal ? \"width\" : \"height\";\r\n  const windowSizeKey = isHorizontal ? \"innerWidth\" : \"innerHeight\";\r\n  const mountedIndexes = new WeakMap<Element, number>();\r\n\r\n  const resizeObserver = createResizeObserver((entries) => {\r\n    const resizes: ItemResize[] = [];\r\n    for (const { target, contentRect } of entries) {\r\n      // Skip zero-sized rects that may be observed under `display: none` style\r\n      if (!(target as HTMLElement).offsetParent) continue;\r\n\r\n      const index = mountedIndexes.get(target);\r\n      if (index != NULL) {\r\n        resizes.push([index, contentRect[sizeKey]]);\r\n      }\r\n    }\r\n\r\n    if (resizes.length) {\r\n      store.$update(ACTION_ITEM_RESIZE, resizes);\r\n    }\r\n  });\r\n\r\n  let cleanupOnWindowResize: (() => void) | undefined;\r\n\r\n  return {\r\n    $observeRoot(container) {\r\n      const window = getCurrentWindow(getCurrentDocument(container));\r\n      const onWindowResize = () => {\r\n        store.$update(ACTION_VIEWPORT_RESIZE, window[windowSizeKey]);\r\n      };\r\n      window.addEventListener(\"resize\", onWindowResize);\r\n\r\n      // https://github.com/inokawa/virtua/issues/792\r\n      microtask(onWindowResize);\r\n\r\n      cleanupOnWindowResize = () => {\r\n        window.removeEventListener(\"resize\", onWindowResize);\r\n      };\r\n    },\r\n    $observeItem: (el: HTMLElement, i: number) => {\r\n      mountedIndexes.set(el, i);\r\n      resizeObserver._observe(el);\r\n      return () => {\r\n        mountedIndexes.delete(el);\r\n        resizeObserver._unobserve(el);\r\n      };\r\n    },\r\n    $dispose() {\r\n      cleanupOnWindowResize && cleanupOnWindowResize();\r\n      resizeObserver._dispose();\r\n    },\r\n  };\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const createGridResizer = (\r\n  rowStore: VirtualStore,\r\n  colStore: VirtualStore\r\n) => {\r\n  let viewportElement: HTMLElement | undefined;\r\n\r\n  const mountedIndexes = new WeakMap<\r\n    Element,\r\n    [rowIndex: number, colIndex: number]\r\n  >();\r\n\r\n  type CellSize = [height: number, width: number];\r\n  const maybeCachedRowIndexes = new Set<number>();\r\n  const maybeCachedColIndexes = new Set<number>();\r\n  const sizeCache = new Map<string, CellSize>();\r\n  const getKey = (rowIndex: number, colIndex: number): string =>\r\n    `${rowIndex}-${colIndex}`;\r\n\r\n  const resizeObserver = createResizeObserver((entries) => {\r\n    const resizedRows = new Set<number>();\r\n    const resizedCols = new Set<number>();\r\n    for (const {\r\n      target,\r\n      contentRect: { width, height },\r\n    } of entries) {\r\n      // Skip zero-sized rects that may be observed under `display: none` style\r\n      if (!(target as HTMLElement).offsetParent) continue;\r\n\r\n      if (target === viewportElement) {\r\n        rowStore.$update(ACTION_VIEWPORT_RESIZE, height);\r\n        colStore.$update(ACTION_VIEWPORT_RESIZE, width);\r\n      } else {\r\n        const cell = mountedIndexes.get(target);\r\n        if (cell) {\r\n          const [rowIndex, colIndex] = cell;\r\n          const key = getKey(rowIndex, colIndex);\r\n          const prevSize = sizeCache.get(key);\r\n          let rowResized: boolean | undefined;\r\n          let colResized: boolean | undefined;\r\n          if (!prevSize) {\r\n            rowResized = colResized = true;\r\n          } else {\r\n            if (prevSize[0] !== height) {\r\n              rowResized = true;\r\n            }\r\n            if (prevSize[1] !== width) {\r\n              colResized = true;\r\n            }\r\n          }\r\n          if (rowResized) {\r\n            resizedRows.add(rowIndex);\r\n          }\r\n          if (colResized) {\r\n            resizedCols.add(colIndex);\r\n          }\r\n          if (rowResized || colResized) {\r\n            sizeCache.set(key, [height, width]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (resizedRows.size) {\r\n      const heightResizes: ItemResize[] = [];\r\n      resizedRows.forEach((rowIndex) => {\r\n        let maxHeight = 0;\r\n        maybeCachedColIndexes.forEach((colIndex) => {\r\n          const size = sizeCache.get(getKey(rowIndex, colIndex));\r\n          if (size) {\r\n            maxHeight = max(maxHeight, size[0]);\r\n          }\r\n        });\r\n        if (maxHeight) {\r\n          heightResizes.push([rowIndex, maxHeight]);\r\n        }\r\n      });\r\n      rowStore.$update(ACTION_ITEM_RESIZE, heightResizes);\r\n    }\r\n    if (resizedCols.size) {\r\n      const widthResizes: ItemResize[] = [];\r\n      resizedCols.forEach((colIndex) => {\r\n        let maxWidth = 0;\r\n        maybeCachedRowIndexes.forEach((rowIndex) => {\r\n          const size = sizeCache.get(getKey(rowIndex, colIndex));\r\n          if (size) {\r\n            maxWidth = max(maxWidth, size[1]);\r\n          }\r\n        });\r\n        if (maxWidth) {\r\n          widthResizes.push([colIndex, maxWidth]);\r\n        }\r\n      });\r\n      colStore.$update(ACTION_ITEM_RESIZE, widthResizes);\r\n    }\r\n  });\r\n\r\n  return {\r\n    $observeRoot(viewport: HTMLElement) {\r\n      resizeObserver._observe((viewportElement = viewport));\r\n    },\r\n    $observeItem(el: HTMLElement, rowIndex: number, colIndex: number) {\r\n      mountedIndexes.set(el, [rowIndex, colIndex]);\r\n      maybeCachedRowIndexes.add(rowIndex);\r\n      maybeCachedColIndexes.add(colIndex);\r\n      resizeObserver._observe(el);\r\n      return () => {\r\n        mountedIndexes.delete(el);\r\n        resizeObserver._unobserve(el);\r\n      };\r\n    },\r\n    $resizeCols(cols: ItemResize[]) {\r\n      for (const [c] of cols) {\r\n        for (let r = 0; r < rowStore.$getItemsLength(); r++) {\r\n          sizeCache.delete(getKey(r, c));\r\n        }\r\n      }\r\n      colStore.$update(ACTION_ITEM_RESIZE, cols);\r\n    },\r\n    $resizeRows(rows: ItemResize[]) {\r\n      for (const [r] of rows) {\r\n        for (let c = 0; c < colStore.$getItemsLength(); c++) {\r\n          sizeCache.delete(getKey(r, c));\r\n        }\r\n      }\r\n      rowStore.$update(ACTION_ITEM_RESIZE, rows);\r\n    },\r\n    $dispose: resizeObserver._dispose,\r\n  };\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport type GridResizer = ReturnType<typeof createGridResizer>;\r\n","/**\r\n * @jsxImportSource solid-js\r\n */\r\nimport { type ItemResizeObserver } from \"../core/index.js\";\r\nimport {\r\n  type Component,\r\n  type JSX,\r\n  createEffect,\r\n  createMemo,\r\n  mergeProps,\r\n  onCleanup,\r\n  type ValidComponent,\r\n} from \"solid-js\";\r\nimport { Dynamic } from \"solid-js/web\";\r\n\r\ninterface ListItemProps {\r\n  _children: JSX.Element;\r\n  _resizer: ItemResizeObserver;\r\n  _index: number;\r\n  _offset: number;\r\n  _hide: boolean;\r\n  _isHorizontal: boolean;\r\n  _as?: ValidComponent;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const ListItem: Component<ListItemProps> = (props) => {\r\n  let elementRef: HTMLDivElement | undefined;\r\n  props = mergeProps<[Partial<ListItemProps>, ListItemProps]>(\r\n    { _as: \"div\" },\r\n    props\r\n  );\r\n\r\n  // The index may be changed if elements are inserted to or removed from the start of props.children\r\n  createEffect(() => {\r\n    if (!elementRef) return;\r\n    onCleanup(props._resizer(elementRef, props._index));\r\n  });\r\n\r\n  const style = createMemo(() => {\r\n    const isHorizontal = props._isHorizontal;\r\n    const style: JSX.CSSProperties = {\r\n      contain: \"layout style\",\r\n      position: \"absolute\",\r\n      [isHorizontal ? \"height\" : \"width\"]: \"100%\",\r\n      [isHorizontal ? \"top\" : \"left\"]: \"0px\",\r\n      [isHorizontal ? \"left\" : \"top\"]: props._offset + \"px\",\r\n      visibility: props._hide ? \"hidden\" : undefined,\r\n    };\r\n    if (isHorizontal) {\r\n      style.display = \"inline-flex\";\r\n    }\r\n    return style;\r\n  });\r\n\r\n  return (\r\n    <Dynamic\r\n      component={props._as}\r\n      index={props._index}\r\n      ref={elementRef}\r\n      style={style()}\r\n    >\r\n      {props._children}\r\n    </Dynamic>\r\n  );\r\n};\r\n","import { type ItemsRange } from \"../core/index.js\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const isSameRange = (prev: ItemsRange, next: ItemsRange): boolean => {\r\n  return prev[0] === next[0] && prev[1] === next[1];\r\n};\r\n","/**\r\n * @jsxImportSource solid-js\r\n */\r\nimport {\r\n  onMount,\r\n  onCleanup,\r\n  createEffect,\r\n  createSignal,\r\n  createMemo,\r\n  type JSX,\r\n  on,\r\n  createComputed,\r\n  type ValidComponent,\r\n  mergeProps,\r\n  For,\r\n  type Accessor,\r\n  untrack,\r\n} from \"solid-js\";\r\nimport { Dynamic } from \"solid-js/web\";\r\nimport {\r\n  UPDATE_SCROLL_EVENT,\r\n  UPDATE_SCROLL_END_EVENT,\r\n  UPDATE_VIRTUAL_STATE,\r\n  createVirtualStore,\r\n  ACTION_ITEMS_LENGTH_CHANGE,\r\n  getScrollSize,\r\n  ACTION_START_OFFSET_CHANGE,\r\n  createResizer,\r\n  createScroller,\r\n  type ItemsRange,\r\n  type ScrollToIndexOpts,\r\n  type CacheSnapshot,\r\n  sort,\r\n} from \"../core/index.js\";\r\nimport { ListItem } from \"./ListItem.js\";\r\nimport { isSameRange } from \"./utils.js\";\r\n\r\n/**\r\n * Methods of {@link Virtualizer}.\r\n */\r\nexport interface VirtualizerHandle {\r\n  /**\r\n   * Get current {@link CacheSnapshot}.\r\n   */\r\n  readonly cache: CacheSnapshot;\r\n  /**\r\n   * Get current scrollTop, or scrollLeft if horizontal: true.\r\n   */\r\n  readonly scrollOffset: number;\r\n  /**\r\n   * Get current scrollHeight, or scrollWidth if horizontal: true.\r\n   */\r\n  readonly scrollSize: number;\r\n  /**\r\n   * Get current offsetHeight, or offsetWidth if horizontal: true.\r\n   */\r\n  readonly viewportSize: number;\r\n  /**\r\n   * Find nearest item index from offset.\r\n   * @param offset offset in pixels from the start of the scroll container\r\n   */\r\n  findItemIndex(offset: number): number;\r\n  /**\r\n   * Get item offset from start.\r\n   * @param index index of item\r\n   */\r\n  getItemOffset(index: number): number;\r\n  /**\r\n   * Get item size.\r\n   * @param index index of item\r\n   */\r\n  getItemSize(index: number): number;\r\n  /**\r\n   * Scroll to the item specified by index.\r\n   * @param index index of item\r\n   * @param opts options\r\n   */\r\n  scrollToIndex(index: number, opts?: ScrollToIndexOpts): void;\r\n  /**\r\n   * Scroll to the given offset.\r\n   * @param offset offset from start\r\n   */\r\n  scrollTo(offset: number): void;\r\n  /**\r\n   * Scroll by the given offset.\r\n   * @param offset offset from current position\r\n   */\r\n  scrollBy(offset: number): void;\r\n}\r\n\r\n/**\r\n * Props of {@link Virtualizer}.\r\n */\r\nexport interface VirtualizerProps<T> {\r\n  /**\r\n   * Get reference to {@link VirtualizerHandle}.\r\n   */\r\n  ref?: (handle?: VirtualizerHandle) => void;\r\n  /**\r\n   * The data items rendered by this component.\r\n   */\r\n  data: readonly T[];\r\n  /**\r\n   * The elements renderer function.\r\n   */\r\n  children: (data: T, index: Accessor<number>) => JSX.Element;\r\n  /**\r\n   * Extra item space in pixels to render before/after the viewport. The minimum value is 0. Lower value will give better performance but you can increase to avoid showing blank items in fast scrolling.\r\n   * @defaultValue 200\r\n   */\r\n  bufferSize?: number;\r\n  /**\r\n   * Component or element type for container element.\r\n   * @defaultValue \"div\"\r\n   */\r\n  as?: ValidComponent;\r\n  /**\r\n   * Component or element type for item element.\r\n   * @defaultValue \"div\"\r\n   */\r\n  item?: ValidComponent;\r\n  /**\r\n   * Reference to the scrollable element. The default will get the direct parent element of virtualizer.\r\n   */\r\n  scrollRef?: HTMLElement;\r\n  /**\r\n   * Item size hint for unmeasured items in pixels. It will help to reduce scroll jump when items are measured if used properly.\r\n   *\r\n   * - If not set, initial item sizes will be automatically estimated from measured sizes. This is recommended for most cases.\r\n   * - If set, you can opt out estimation and use the value as initial item size.\r\n   */\r\n  itemSize?: number;\r\n  /**\r\n   * While true is set, scroll position will be maintained from the end not usual start when items are added to/removed from start. It's recommended to set false if you add to/remove from mid/end of the list because it can cause unexpected behavior. This prop is useful for reverse infinite scrolling.\r\n   */\r\n  shift?: boolean;\r\n  /**\r\n   * If true, rendered as a horizontally scrollable list. Otherwise rendered as a vertically scrollable list.\r\n   */\r\n  horizontal?: boolean;\r\n  /**\r\n   * List of indexes that should be always mounted, even when off screen.\r\n   */\r\n  keepMounted?: readonly number[];\r\n  /**\r\n   * You can restore cache by passing a {@link CacheSnapshot} on mount. This is useful when you want to restore scroll position after navigation. The snapshot can be obtained from {@link VirtualizerHandle.cache}.\r\n   *\r\n   * **The length of items should be the same as when you take the snapshot, otherwise restoration may not work as expected.**\r\n   */\r\n  cache?: CacheSnapshot;\r\n  /**\r\n   * The offset to the scrollable parent before virtualizer in pixels. If you put an element before virtualizer, you have to set its height to this prop.\r\n   */\r\n  startMargin?: number;\r\n  /**\r\n   * Callback invoked whenever scroll offset changes.\r\n   * @param offset Current scrollTop, or scrollLeft if horizontal: true.\r\n   */\r\n  onScroll?: (offset: number) => void;\r\n  /**\r\n   * Callback invoked when scrolling stops.\r\n   */\r\n  onScrollEnd?: () => void;\r\n}\r\n\r\n/**\r\n * Customizable list virtualizer for advanced usage. See {@link VirtualizerProps} and {@link VirtualizerHandle}.\r\n */\r\nexport const Virtualizer = <T,>(props: VirtualizerProps<T>): JSX.Element => {\r\n  let containerRef: HTMLDivElement | undefined;\r\n  const { itemSize, horizontal = false, cache } = props;\r\n  props = mergeProps<[Partial<VirtualizerProps<T>>, VirtualizerProps<T>]>(\r\n    { as: \"div\" },\r\n    props\r\n  );\r\n\r\n  const store = createVirtualStore(\r\n    props.data.length,\r\n    itemSize,\r\n    undefined,\r\n    cache,\r\n    !itemSize\r\n  );\r\n  const resizer = createResizer(store, horizontal);\r\n  const scroller = createScroller(store, horizontal);\r\n\r\n  const [stateVersion, setRerender] = createSignal(store.$getStateVersion());\r\n\r\n  store.$subscribe(UPDATE_VIRTUAL_STATE, () => {\r\n    setRerender(store.$getStateVersion());\r\n  });\r\n  store.$subscribe(UPDATE_SCROLL_EVENT, () => {\r\n    props.onScroll?.(store.$getScrollOffset());\r\n  });\r\n  store.$subscribe(UPDATE_SCROLL_END_EVENT, () => {\r\n    props.onScrollEnd?.();\r\n  });\r\n\r\n  const range = createMemo<ItemsRange>((prev) => {\r\n    stateVersion();\r\n    const next = store.$getRange(props.bufferSize);\r\n    if (prev && isSameRange(prev, next)) {\r\n      return prev;\r\n    }\r\n    return next;\r\n  });\r\n  const isScrolling = createMemo(() => stateVersion() && store.$isScrolling());\r\n  const totalSize = createMemo(() => stateVersion() && store.$getTotalSize());\r\n  const isNegative = createMemo(() => stateVersion() && scroller.$isNegative());\r\n\r\n  onMount(() => {\r\n    if (props.ref) {\r\n      props.ref({\r\n        get cache() {\r\n          return store.$getCacheSnapshot();\r\n        },\r\n        get scrollOffset() {\r\n          return store.$getScrollOffset();\r\n        },\r\n        get scrollSize() {\r\n          return getScrollSize(store);\r\n        },\r\n        get viewportSize() {\r\n          return store.$getViewportSize();\r\n        },\r\n        findItemIndex: store.$findItemIndex,\r\n        getItemOffset: store.$getItemOffset,\r\n        getItemSize: store.$getItemSize,\r\n        scrollToIndex: scroller.$scrollToIndex,\r\n        scrollTo: scroller.$scrollTo,\r\n        scrollBy: scroller.$scrollBy,\r\n      });\r\n    }\r\n\r\n    const container = containerRef!;\r\n    const scrollable = props.scrollRef || container.parentElement!;\r\n    resizer.$observeRoot(scrollable);\r\n    scroller.$observe(container, scrollable);\r\n\r\n    onCleanup(() => {\r\n      if (props.ref) {\r\n        props.ref();\r\n      }\r\n\r\n      store.$dispose();\r\n      resizer.$dispose();\r\n      scroller.$dispose();\r\n    });\r\n  });\r\n\r\n  createComputed(\r\n    on(\r\n      () => props.startMargin || 0,\r\n      (value) => {\r\n        if (value !== store.$getStartSpacerSize()) {\r\n          store.$update(ACTION_START_OFFSET_CHANGE, value);\r\n        }\r\n      }\r\n    )\r\n  );\r\n\r\n  createEffect(\r\n    on(stateVersion, () => {\r\n      scroller.$fixScrollJump();\r\n    })\r\n  );\r\n\r\n  const dataSlice = createMemo(() => {\r\n    const count = props.data.length;\r\n    untrack(() => {\r\n      if (count !== store.$getItemsLength()) {\r\n        store.$update(ACTION_ITEMS_LENGTH_CHANGE, [count, props.shift]);\r\n      }\r\n    });\r\n    const items: T[] = [];\r\n    const indexes: number[] = [];\r\n\r\n    if (props.keepMounted) {\r\n      const mounted = new Set(props.keepMounted);\r\n      for (let [i, j] = range(); i <= j; i++) {\r\n        mounted.add(i);\r\n      }\r\n      sort([...mounted]).forEach((index) => {\r\n        items.push(props.data[index]!);\r\n        indexes.push(index);\r\n      });\r\n    } else {\r\n      for (let [i, j] = range(); i <= j; i++) {\r\n        items.push(props.data[i]!);\r\n        indexes.push(i);\r\n      }\r\n    }\r\n\r\n    return { _items: items, _indexes: indexes };\r\n  });\r\n\r\n  const renderItem = (data: T, index: Accessor<number>) => {\r\n    const offset = createMemo(() => {\r\n      stateVersion();\r\n      return store.$getItemOffset(index(), isNegative());\r\n    });\r\n    const hide = createMemo(() => {\r\n      stateVersion();\r\n      return store.$isUnmeasuredItem(index());\r\n    });\r\n    const children = createMemo(() => {\r\n      return untrack(() => props.children(data, index));\r\n    });\r\n\r\n    return (\r\n      <ListItem\r\n        _as={props.item}\r\n        _index={index()}\r\n        _resizer={resizer.$observeItem}\r\n        _offset={offset()}\r\n        _hide={hide()}\r\n        _children={children()}\r\n        _isHorizontal={horizontal}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Dynamic\r\n      component={props.as}\r\n      ref={containerRef}\r\n      style={{\r\n        contain: \"size style\", // https://github.com/inokawa/virtua/pull/775 https://github.com/inokawa/virtua/issues/800\r\n        \"overflow-anchor\": \"none\", // opt out browser's scroll anchoring because it will conflict to scroll anchoring of virtualizer\r\n        flex: \"none\", // flex style can break layout\r\n        position: \"relative\",\r\n        width: horizontal ? totalSize() + \"px\" : \"100%\",\r\n        height: horizontal ? \"100%\" : totalSize() + \"px\",\r\n        \"pointer-events\": isScrolling() ? \"none\" : undefined,\r\n      }}\r\n    >\r\n      <For each={dataSlice()._items}>\r\n        {(data, index) => {\r\n          const itemIndex = createMemo(() => dataSlice()._indexes[index()]!);\r\n          // eslint-disable-next-line solid/reactivity\r\n          return renderItem(data, itemIndex);\r\n        }}\r\n      </For>\r\n    </Dynamic>\r\n  );\r\n};\r\n","/**\r\n * @jsxImportSource solid-js\r\n */\r\nimport { type JSX, splitProps } from \"solid-js\";\r\nimport { type ViewportComponentAttributes } from \"./types.js\";\r\nimport {\r\n  Virtualizer,\r\n  type VirtualizerHandle,\r\n  type VirtualizerProps,\r\n} from \"./Virtualizer.js\";\r\n\r\n/**\r\n * Methods of {@link VList}.\r\n */\r\nexport interface VListHandle extends VirtualizerHandle {}\r\n\r\n/**\r\n * Props of {@link VList}.\r\n */\r\nexport interface VListProps<T>\r\n  extends Pick<\r\n      VirtualizerProps<T>,\r\n      | \"ref\"\r\n      | \"data\"\r\n      | \"children\"\r\n      | \"bufferSize\"\r\n      | \"itemSize\"\r\n      | \"shift\"\r\n      | \"horizontal\"\r\n      | \"cache\"\r\n      | \"item\"\r\n      | \"onScroll\"\r\n      | \"onScrollEnd\"\r\n      | \"keepMounted\"\r\n    >,\r\n    ViewportComponentAttributes {}\r\n\r\n/**\r\n * Virtualized list component. See {@link VListProps} and {@link VListHandle}.\r\n */\r\nexport const VList = <T,>(props: VListProps<T>): JSX.Element => {\r\n  const [local, others] = splitProps(props, [\r\n    \"ref\",\r\n    \"data\",\r\n    \"children\",\r\n    \"bufferSize\",\r\n    \"itemSize\",\r\n    \"shift\",\r\n    \"horizontal\",\r\n    \"keepMounted\",\r\n    \"cache\",\r\n    \"item\",\r\n    \"onScroll\",\r\n    \"onScrollEnd\",\r\n    \"style\",\r\n  ]);\r\n\r\n  return (\r\n    <div\r\n      {...others}\r\n      style={{\r\n        display: local.horizontal ? \"inline-block\" : \"block\",\r\n        [local.horizontal ? \"overflow-x\" : \"overflow-y\"]: \"auto\",\r\n        contain: \"strict\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        ...local.style,\r\n      }}\r\n    >\r\n      <Virtualizer\r\n        ref={local.ref}\r\n        data={local.data}\r\n        bufferSize={local.bufferSize}\r\n        itemSize={local.itemSize}\r\n        shift={local.shift}\r\n        horizontal={local.horizontal}\r\n        keepMounted={local.keepMounted}\r\n        cache={local.cache}\r\n        item={local.item}\r\n        onScroll={local.onScroll}\r\n        onScrollEnd={local.onScrollEnd}\r\n      >\r\n        {local.children}\r\n      </Virtualizer>\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * @jsxImportSource solid-js\r\n */\r\nimport {\r\n  onMount,\r\n  onCleanup,\r\n  createEffect,\r\n  createSignal,\r\n  createMemo,\r\n  type JSX,\r\n  type Accessor,\r\n  on,\r\n  For,\r\n  untrack,\r\n} from \"solid-js\";\r\nimport {\r\n  UPDATE_SCROLL_END_EVENT,\r\n  UPDATE_VIRTUAL_STATE,\r\n  createVirtualStore,\r\n  ACTION_ITEMS_LENGTH_CHANGE,\r\n  UPDATE_SCROLL_EVENT,\r\n  createWindowResizer,\r\n  createWindowScroller,\r\n  type ItemsRange,\r\n  type ScrollToIndexOpts,\r\n  type CacheSnapshot,\r\n} from \"../core/index.js\";\r\nimport { ListItem } from \"./ListItem.js\";\r\nimport { isSameRange } from \"./utils.js\";\r\n\r\n/**\r\n * Methods of {@link WindowVirtualizer}.\r\n */\r\nexport interface WindowVirtualizerHandle {\r\n  /**\r\n   * Get current {@link CacheSnapshot}.\r\n   */\r\n  readonly cache: CacheSnapshot;\r\n  /**\r\n   * Get current scrollTop, or scrollLeft if horizontal: true.\r\n   */\r\n  readonly scrollOffset: number;\r\n  /**\r\n   * Get current offsetHeight, or offsetWidth if horizontal: true.\r\n   */\r\n  readonly viewportSize: number;\r\n  /**\r\n   * Find nearest item index from offset.\r\n   * @param offset offset in pixels from the start of the scroll container\r\n   */\r\n  findItemIndex(offset: number): number;\r\n  /**\r\n   * Get item offset from start.\r\n   * @param index index of item\r\n   */\r\n  getItemOffset(index: number): number;\r\n  /**\r\n   * Get item size.\r\n   * @param index index of item\r\n   */\r\n  getItemSize(index: number): number;\r\n  /**\r\n   * Scroll to the item specified by index.\r\n   * @param index index of item\r\n   * @param opts options\r\n   */\r\n  scrollToIndex(index: number, opts?: ScrollToIndexOpts): void;\r\n}\r\n\r\n/**\r\n * Props of {@link WindowVirtualizer}.\r\n */\r\nexport interface WindowVirtualizerProps<T> {\r\n  /**\r\n   * Get reference to {@link WindowVirtualizerHandle}.\r\n   */\r\n  ref?: (handle?: WindowVirtualizerHandle) => void;\r\n  /**\r\n   * The data items rendered by this component.\r\n   */\r\n  data: readonly T[];\r\n  /**\r\n   * The elements renderer function.\r\n   */\r\n  children: (data: T, index: Accessor<number>) => JSX.Element;\r\n  /**\r\n   * Extra item space in pixels to render before/after the viewport. The minimum value is 0. Lower value will give better performance but you can increase to avoid showing blank items in fast scrolling.\r\n   * @defaultValue 200\r\n   */\r\n  bufferSize?: number;\r\n  /**\r\n   * Item size hint for unmeasured items in pixels. It will help to reduce scroll jump when items are measured if used properly.\r\n   *\r\n   * - If not set, initial item sizes will be automatically estimated from measured sizes. This is recommended for most cases.\r\n   * - If set, you can opt out estimation and use the value as initial item size.\r\n   */\r\n  itemSize?: number;\r\n  /**\r\n   * While true is set, scroll position will be maintained from the end not usual start when items are added to/removed from start. It's recommended to set false if you add to/remove from mid/end of the list because it can cause unexpected behavior. This prop is useful for reverse infinite scrolling.\r\n   */\r\n  shift?: boolean;\r\n  /**\r\n   * If true, rendered as a horizontally scrollable list. Otherwise rendered as a vertically scrollable list.\r\n   */\r\n  horizontal?: boolean;\r\n  /**\r\n   * You can restore cache by passing a {@link CacheSnapshot} on mount. This is useful when you want to restore scroll position after navigation. The snapshot can be obtained from {@link WindowVirtualizerHandle.cache}.\r\n   *\r\n   * **The length of items should be the same as when you take the snapshot, otherwise restoration may not work as expected.**\r\n   */\r\n  cache?: CacheSnapshot;\r\n  /**\r\n   * Callback invoked whenever scroll offset changes.\r\n   */\r\n  onScroll?: () => void;\r\n  /**\r\n   * Callback invoked when scrolling stops.\r\n   */\r\n  onScrollEnd?: () => void;\r\n}\r\n\r\n/**\r\n * {@link Virtualizer} controlled by the window scrolling. See {@link WindowVirtualizerProps} and {@link WindowVirtualizerHandle}.\r\n */\r\nexport const WindowVirtualizer = <T,>(\r\n  props: WindowVirtualizerProps<T>\r\n): JSX.Element => {\r\n  let containerRef: HTMLDivElement | undefined;\r\n\r\n  const {\r\n    ref: _ref,\r\n    data: _data,\r\n    children: _children,\r\n    itemSize,\r\n    shift: _shift,\r\n    horizontal = false,\r\n    cache,\r\n    onScrollEnd: _onScrollEnd,\r\n  } = props;\r\n\r\n  const store = createVirtualStore(\r\n    props.data.length,\r\n    itemSize,\r\n    undefined,\r\n    cache,\r\n    !itemSize\r\n  );\r\n  const resizer = createWindowResizer(store, horizontal);\r\n  const scroller = createWindowScroller(store, horizontal);\r\n\r\n  const [stateVersion, setRerender] = createSignal(store.$getStateVersion());\r\n\r\n  store.$subscribe(UPDATE_VIRTUAL_STATE, () => {\r\n    setRerender(store.$getStateVersion());\r\n  });\r\n  store.$subscribe(UPDATE_SCROLL_EVENT, () => {\r\n    // https://github.com/inokawa/virtua/discussions/580\r\n    props.onScroll?.();\r\n  });\r\n  store.$subscribe(UPDATE_SCROLL_END_EVENT, () => {\r\n    props.onScrollEnd?.();\r\n  });\r\n\r\n  const range = createMemo<ItemsRange>((prev) => {\r\n    stateVersion();\r\n    const next = store.$getRange(props.bufferSize);\r\n    if (prev && isSameRange(prev, next)) {\r\n      return prev;\r\n    }\r\n    return next;\r\n  });\r\n  const isScrolling = createMemo(() => stateVersion() && store.$isScrolling());\r\n  const totalSize = createMemo(() => stateVersion() && store.$getTotalSize());\r\n  const isNegative = createMemo(() => stateVersion() && scroller.$isNegative());\r\n\r\n  onMount(() => {\r\n    if (props.ref) {\r\n      props.ref({\r\n        get cache() {\r\n          return store.$getCacheSnapshot();\r\n        },\r\n        get scrollOffset() {\r\n          return store.$getScrollOffset();\r\n        },\r\n        get viewportSize() {\r\n          return store.$getViewportSize();\r\n        },\r\n        findItemIndex: store.$findItemIndex,\r\n        getItemOffset: store.$getItemOffset,\r\n        getItemSize: store.$getItemSize,\r\n        scrollToIndex: scroller.$scrollToIndex,\r\n      });\r\n    }\r\n\r\n    resizer.$observeRoot(containerRef!);\r\n    scroller.$observe(containerRef!);\r\n\r\n    onCleanup(() => {\r\n      if (props.ref) {\r\n        props.ref();\r\n      }\r\n\r\n      store.$dispose();\r\n      resizer.$dispose();\r\n      scroller.$dispose();\r\n    });\r\n  });\r\n\r\n  createEffect(\r\n    on(stateVersion, () => {\r\n      scroller.$fixScrollJump();\r\n    })\r\n  );\r\n\r\n  const dataSlice = createMemo<T[]>(() => {\r\n    const count = props.data.length;\r\n    untrack(() => {\r\n      if (count !== store.$getItemsLength()) {\r\n        store.$update(ACTION_ITEMS_LENGTH_CHANGE, [count, props.shift]);\r\n      }\r\n    });\r\n    const items: T[] = [];\r\n    for (let [i, j] = range(); i <= j; i++) {\r\n      items.push(props.data[i]!);\r\n    }\r\n    return items;\r\n  });\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      style={{\r\n        contain: \"size style\", // https://github.com/inokawa/virtua/pull/775 https://github.com/inokawa/virtua/issues/800\r\n        \"overflow-anchor\": \"none\", // opt out browser's scroll anchoring because it will conflict to scroll anchoring of virtualizer\r\n        flex: \"none\", // flex style can break layout\r\n        position: \"relative\",\r\n        width: horizontal ? totalSize() + \"px\" : \"100%\",\r\n        height: horizontal ? \"100%\" : totalSize() + \"px\",\r\n        \"pointer-events\": isScrolling() ? \"none\" : undefined,\r\n      }}\r\n    >\r\n      <For each={dataSlice()}>\r\n        {(data, index) => {\r\n          const itemIndex = createMemo(() => range()[0] + index());\r\n          const offset = createMemo(() => {\r\n            stateVersion();\r\n            return store.$getItemOffset(itemIndex(), isNegative());\r\n          });\r\n          const hide = createMemo(() => {\r\n            stateVersion();\r\n            return store.$isUnmeasuredItem(itemIndex());\r\n          });\r\n          const children = createMemo(() => {\r\n            return untrack(() => props.children(data, itemIndex));\r\n          });\r\n\r\n          return (\r\n            <ListItem\r\n              _index={itemIndex()}\r\n              _resizer={resizer.$observeItem}\r\n              _offset={offset()}\r\n              _hide={hide()}\r\n              _children={children()}\r\n              _isHorizontal={horizontal}\r\n            />\r\n          );\r\n        }}\r\n      </For>\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * @module solid\r\n */\r\nexport { VList } from \"./VList.js\";\r\nexport type { VListProps, VListHandle } from \"./VList.js\";\r\nexport { Virtualizer } from \"./Virtualizer.js\";\r\nexport type { VirtualizerProps, VirtualizerHandle } from \"./Virtualizer.js\";\r\nexport { WindowVirtualizer } from \"./WindowVirtualizer.js\";\r\nexport type {\r\n  WindowVirtualizerProps,\r\n  WindowVirtualizerHandle,\r\n} from \"./WindowVirtualizer.js\";\r\nexport type * from \"./types.js\";\r\n"],"names":["_getItemOffset","getItemOffset","getItemSize","_getItemSize"],"mappings":"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"}